backend:
  name: git-gateway
  branch: main # NOTE this relates to your GitHub branch
publish_mode: editorial_workflow
i18n:
  structure: multiple_folders
  locales: [en, pt-BR]
  default_locale: en
local_backend: true # allows for you to locally mess with your CMS
media_folder: "public/images/uploads" # Media files will be stored in the repo under public/images/uploads
public_folder: "/images/uploads" # The src attribute for uploaded media will begin with /images/uploads
editor:
  preview: false # we're going to hide the preview editor
collections:
  - name: "segmentation-data"
    label: "Segmentation Data"
    files:
      - name: "post-categories"
        label: "Post Categories"
        format: "json"
        extension: "json"
        file: "src/data/post-categories.json"
        fields:
          - name: "categories-list"
            label: "List"
            widget: "list"
            collapsed: true
            label_singular: "category"
            fields:
              - label: "Slug"
                name: "slug"
                widget: "string"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"
              - label: "Color"
                name: "color"
                widget: "color"
                allowInput: true
              - label: "Image"
                name: "image"
                widget: "image"
                allow_multiple: false
                choose_url: false
      - name: "learnings"
        label: "Learnings"
        format: "json"
        file: "src/data/learnings.json"
        fields:
          - name: "learnings-list"
            label: "Learnings list"
            widget: "list"
            fields:
              - label: "slug"
                name: "Slug"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"
              - label: "Color"
                name: "color"
                widget: "color"
      - name: "snippets-types"
        label: "Snippets types"
        format: "json"
        file: "src/data/snippets-types.json"
        fields:
          - name: "snippets-types-list"
            label: "Snippets types list"
            widget: "list"
            fields:
              - label: "slug"
                name: "Slug"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"
  
  - name: "posts"
    label: "Posts"
    i18n: true
    create: true
    folder: "src/pages/posts"
    fields:
      - label: "Title"
        name: "title"
        widget: "string"
        i18n: true
      - label: "Publish Date"
        name: "date"
        widget: "datetime"
        i18n: duplicate
      - label: "Featured Image"
        name: "thumbnail"
        widget: "image"
        i18n: duplicate
        required: false
      - label: "Body"
        name: "body"
        widget: "markdown"
        i18n: true
      - label: "Categories"
        name: "categories"
        widget: "relation"
        collection: "segmentation-data"
        file: "post-categories"
        multiple: true
        i18n: duplicate
        search_fields: ["categories-list.*.label"]
        display_fields: ["categories-list.*.label"]
        value_field: "categories-list.*.slug"

  - name: "categories"
    label: "Post Category"
    folder: "src/data/categories"
    create: true
    slug: "{{slug}}"
    identifier_field: label
    format: json
    fields:
      - { label: "Label", name: "label", widget: "string" }
      - { label: "Color", name: "color", widget: "color", allowInput: true }
      - {
          label: "Image",
          name: "image",
          widget: "image",
          allow_multiple: false,
          choose_url: false,
        }
      - label: "City"
        name: "city"
        widget: "relation"
        collection: "segmentation-data"
        file: "post-categories"
        search_fields: ["categories-list.*.label"]
        display_fields: ["categories-list.*.label"]
        value_field: "categories-list.*.label"
