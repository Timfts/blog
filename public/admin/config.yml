backend:
  name: git-gateway
  branch: main # NOTE this relates to your GitHub branch
publish_mode: editorial_workflow
local_backend: true # allows for you to locally mess with your CMS
media_folder: "public/images/uploads" # Media files will be stored in the repo under public/images/uploads
public_folder: "/images/uploads" # The src attribute for uploaded media will begin with /images/uploads
editor:
  preview: false
collections:
  - name: "segmentation-data"
    label: "Segmentation Data"
    files:
      - name: "post-topics"
        label: "Post Topics"
        format: "json"
        extension: "json"
        file: "src/data/post-topics.json"
        fields:
          - name: "topics-list"
            label: "List"
            widget: "list"
            collapsed: true
            label_singular: "category"
            fields:
              - label: "Slug"
                name: "slug"
                widget: "string"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"
              - label: "Color"
                name: "color"
                widget: "color"
                allowInput: true
              - label: "Image"
                name: "image"
                widget: "image"
                allow_multiple: false
                choose_url: false
      - name: "learnings"
        label: "Learnings"
        format: "json"
        file: "src/data/learnings.json"
        fields:
          - name: "learnings-list"
            label: "Learnings list"
            widget: "list"
            fields:
              - label: "slug"
                name: "Slug"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"
              - label: "Color"
                name: "color"
                widget: "color"
      - name: "snippets-types"
        label: "Snippets types"
        format: "json"
        file: "src/data/snippets-types.json"
        fields:
          - name: "snippets-types-list"
            label: "Snippets types list"
            widget: "list"
            fields:
              - label: "slug"
                name: "Slug"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"

  - name: "en-posts"
    label: "Posts (en)"
    label_singular: "Post (en)"
    create: true
    preview_path: "pages/{{slug}}"
    folder: "src/pages/post"
    fields:
      - label: "layout"
        name: "layout"
        widget: "hidden"
        default: "@templates/Post.astro"
      - label: "lang"
        name: "lang"
        widget: "hidden"
        default: "en"
      - label: "Title"
        name: "title"
        widget: "string"
      - label: "Publish Date"
        name: "created_date"
        widget: "datetime"
      - label: "Updated Date"
        name: "updated_date"
        default: ""
        widget: "datetime"        
      - label: "Featured Image"
        name: "thumbnail"
        widget: "image"
        required: false
      - label: "Body"
        name: "body"
        widget: "markdown"
      - label: "Topics"
        name: "topics"
        widget: "relation"
        collection: "segmentation-data"
        file: "post-topics"
        multiple: true
        search_fields: ["topics-list.*.label"]
        display_fields: ["topics-list.*.label"]
        value_field: "topics-list.*.slug"

  - name: "pt-posts"
    label: "Posts (pt)"
    label_singular: "Post (en)"
    create: true
    folder: "src/pages/pt/post"
    fields:
      - label: "lang"
        name: "lang"
        widget: "hidden"
        default: "pt"
      - label: "layout"
        name: "layout"
        widget: "hidden"
        default: "@templates/Post.astro"
      - label: "Title"
        name: "title"
        widget: "string"
      - label: "Publish Date"
        name: "created_date"
        widget: "datetime"
      - label: "Updated Date"
        name: "updated_date"
        default: ""
        widget: "datetime"
      - label: "Featured Image"
        name: "thumbnail"
        widget: "image"
        required: false
      - label: "Body"
        name: "body"
        widget: "markdown"
      - label: "Topics"
        name: "topics"
        widget: "relation"
        collection: "segmentation-data"
        file: "post-topics"
        multiple: true
        search_fields: ["topics-list.*.label"]
        display_fields: ["topics-list.*.label"]
        value_field: "topics-list.*.slug"
