backend:
  name: git-gateway
  branch: main # NOTE this relates to your GitHub branch
publish_mode: editorial_workflow
local_backend: true # allows for you to locally mess with your CMS
media_folder: "public/images/uploads" # Media files will be stored in the repo under public/images/uploads
public_folder: "/images/uploads" #
i18n:
  structure: multiple_folders
  locales: [en, pt]
collections:
  - name: "segmentation-data"
    label: "Segmentation Data"
    files:
      - name: "post-topics"
        label: "Post Topics"
        format: "json"
        extension: "json"
        file: "src/data/post-topics.json"
        fields:
          - name: "topics-list"
            label: "List"
            widget: "list"
            collapsed: true
            label_singular: "category"
            fields:
              - label: "Slug"
                name: "slug"
                widget: "string"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"
              - label: "Color"
                name: "color"
                widget: "color"
                allowInput: true
              - label: "Image"
                name: "image"
                widget: "image"
                allow_multiple: false
                choose_url: false
      - name: "learnings"
        label: "Learnings"
        format: "json"
        file: "src/data/learnings.json"
        fields:
          - name: "learnings-list"
            label: "Learnings list"
            widget: "list"
            fields:
              - label: "Slug"
                name: "slug"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"
              - label: "Color"
                name: "color"
                widget: "color"
      - name: "snippets-types"
        label: "Snippets types"
        format: "json"
        file: "src/data/snippets-types.json"
        fields:
          - name: "snippets-types-list"
            label: "Snippets types list"
            widget: "list"
            fields:
              - label: "slug"
                name: "slug"
                pattern:
                  [
                    "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                    "A url can have no spaces or special characters",
                  ]
              - label: "Label"
                name: "label"
                widget: "string"

  - name: "posts"
    label: "Posts"
    label_singular: "Post"
    create: true
    preview_path: "pages/{{slug}}"
    folder: "src/pages/post"
    i18n: true
    fields:
      - label: "layout"
        name: "layout"
        widget: "hidden"
        default: "@templates/Post.astro"
        i18n: duplicate
      - label: "Title"
        name: "title"
        widget: "string"
        i18n: true
      - label: "External link"
        name: "external-link"
        required: false
        widget: "string"
        i18n: duplicate
      - label: "Publish Date"
        name: "created_date"
        i18n: duplicate
        widget: "datetime"
      - label: "Updated Date"
        name: "updated_date"
        default: ""
        widget: "datetime"
        i18n: duplicate
        required: false
      - label: "Featured Image"
        name: "thumbnail"
        widget: "image"
        required: false
        i18n: duplicate
      - label: "excerpt"
        name: "Excerpt"
        widget: text
        required: true
        i18n: true
      - label: "Body"
        name: "body"
        widget: "markdown"
        required: false
        i18n: true
      - label: "Topics"
        name: "topics"
        widget: "relation"
        collection: "segmentation-data"
        file: "post-topics"
        multiple: true
        i18n: duplicate
        search_fields: ["topics-list.*.label"]
        display_fields: ["topics-list.*.label"]
        value_field: "topics-list.*.slug"
