---
import { Picture } from "astro:assets";
import socialLinks from "@content/_social-links.json";
import SearchBar from "@components/SearchBar/index.astro";
import { getMenuItems } from "./data";

const menuItems = getMenuItems(Astro.currentLocale as any);
const currentPage = Astro.url.pathname;
---

<div class="main-menu" data-fragment="main-menu" transition:persist>
  <header class="header">
    <div class="header-left">
      <div class="avatar">
        <img
          class="avatar-image"
          src="https://avatars.githubusercontent.com/u/17283501?v=4"
          width="260"
          height="260"
        />
      </div>
      <h1 class="name">Tim Fontes</h1>
    </div>
    <div class="header-right">
      <button class="menu-button"></button>
    </div>
  </header>
  <div class="menu-body">
    <menu class="menu-list">
      {
        menuItems.map(({ label, icon, path, iconAlt, id }) => (
          <li class="menu-content-item" id={id}>
            <a
              class:list={[
                "menu-content-link",
                {
                  "menu-content-link--active": path === currentPage,
                },
              ]}
              href={path}
            >
              <Picture
                class="menu-content-icon"
                width={24}
                height={24}
                formats={["webp"]}
                src={icon}
                alt={iconAlt}
              />
              {label}
            </a>
          </li>
        ))
      }
    </menu>

    <div class="search-block">
      <div class="search-block-divider"></div>
      <SearchBar />
    </div>

    <div class="social-holder">
      <ul class="social-list">
        {
          socialLinks["social-links-list"].map(({ label, link }) => (
            <li class="social-li">
              <a class="social-link" href={link} target="_blank">
                {label}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</div>

<script>
  import "./controller";
</script>

<style lang="scss">
  @import "./styles.scss";
</style>
