<script is:inline>
  // Loading user settings on head to avoid FOUC on theme change
  (() => {
    const preferences = localStorage.getItem("USR_PREFS");
    if (!preferences) return;

    const parsedPrefs = JSON.parse(preferences);
    const root = document.querySelector("html");

    // Remove existing preference-related classes
    root.classList.forEach((cls) => {
      const [pref] = cls.split("-");
      if (parsedPrefs.hasOwnProperty(pref)) {
        root.classList.remove(cls);
      }
    });

    // Add new preference-related classes
    Object.entries(parsedPrefs).forEach(([pref, value]) => {
      root.classList.add(`${pref}-${value}`);
    });
  })();
</script>
