---
import Window from "@components/Window/index.astro";
import i18n from "./i18n";
import Tabs from "@components/Tabs/Tabs.astro";
import Tab from "@components/Tabs/Tab.astro";
import Groupbox from "@components/Groupbox.astro";
import FieldRow from "@components/FieldRow.astro";
import Button from "@components/Button.astro";
import LanguageSelector from "@components/LanguageSelector.astro";

const currentLang = Astro.currentLocale as Lang;

const { windowTitle, soonFeature, cancelBtn } = i18n[currentLang];

const themes = [
  { label: "Default", id: "default" },
  { label: "Dark", id: "dark", disabled: true },
];

const uiFilters = [
  { label: "None", id: "none" },
  { label: "Vintage monitor", id: "vintage-monitor" },
  { label: "CRT TV", id: "crt-tv" },
];
---

<div class="settings-window" data-fragment="settings-window" transition:persist>
  <div class="settings-backdrop"></div>
  <div class="settings-container">
    <Window id="settings-window" title={windowTitle}>
      <form id="settings-form">
        <Tabs
          tablist={[
            { label: "UI", id: "ui" },
            { label: "Misc", id: "misc" },
          ]}
        >
          <Tab id="ui">
            <Groupbox legend="Theme">
              {
                themes.map(({ id, label, disabled }) => (
                  <FieldRow>
                    <input
                      id={id}
                      type="radio"
                      value={id}
                      name="theme"
                      disabled={disabled}
                    />
                    <label for={id}>
                      {label}
                      {disabled && ` (${soonFeature})`}
                    </label>
                  </FieldRow>
                ))
              }
            </Groupbox>
            <div class="settings-side-by-side">
              <Groupbox legend="Screen Filter" class="settings-filter">
                <select name="ui-filter" style="width:100%;">
                  {
                    uiFilters.map(({ label, id }) => (
                      <option value={id}>{label}</option>
                    ))
                  }
                </select>
              </Groupbox>
              <Groupbox legend="Text size" class="settings-txt">
                <div class="text-range">
                  <label for="text-size">Small</label>
                  <input
                    id="text-size"
                    type="range"
                    min="0"
                    max="100"
                    step="50"
                  />
                  <label for="text-size">Big</label>
                </div>
              </Groupbox>
            </div>
          </Tab>
          <Tab id="misc">
            <Groupbox legend="Custom pointer">
              <FieldRow>
                <input checked type="checkbox" id="example2" />
                <label for="example2">Use custom pointer</label>
              </FieldRow>
            </Groupbox>
            <Groupbox legend="Language">
              <LanguageSelector useLabel={false} />
            </Groupbox>
          </Tab>
        </Tabs>
        <div class="settings-actions">
          <Button type="submit">Ok</Button>
          <Button id="settings-cancel">{cancelBtn}</Button>
        </div>
      </form>
    </Window>
  </div>
</div>

<style lang="scss">
  @import "./styles.scss";
</style>

<script>
  import "./controller";
</script>
